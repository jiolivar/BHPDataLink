[gd_scene load_steps=16 format=2]

[ext_resource path="res://game/main_screens/question_templates/connect_pairs.tscn" type="PackedScene" id=1]
[ext_resource path="res://game/main_screens/question_templates/Elements/pair_element.tscn" type="PackedScene" id=2]
[ext_resource path="res://game/components/help/cursor_help.tscn" type="PackedScene" id=3]
[ext_resource path="res://assets/images/bg2.png" type="Texture" id=4]
[ext_resource path="res://assets/images/bg4.png" type="Texture" id=5]
[ext_resource path="res://assets/images/bg2.1.png" type="Texture" id=6]
[ext_resource path="res://assets/images/bg3.png" type="Texture" id=7]

[sub_resource type="RectangleShape2D" id=10]
resource_local_to_scene = true
extents = Vector2( 180, 28.5 )

[sub_resource type="Shader" id=3]
code = "shader_type canvas_item;
uniform float width = 2.0;
uniform vec4 color: hint_color;

void vertex() {
	VERTEX += (UV * 2.0 - 1.0) * width;
}

void fragment(){
	vec2 uv = UV;
    vec4 col;
	
	vec2 texture_pixel_size = vec2(1.0) / (vec2(1.0) / TEXTURE_PIXEL_SIZE + vec2(width * 2.0));
	uv = (uv - texture_pixel_size * width) * TEXTURE_PIXEL_SIZE / texture_pixel_size;
	if (uv != clamp(uv, vec2(0.0), vec2(1.0))) {
		COLOR.a = 0.0;
	} else {
		col = texture(TEXTURE, uv);
	}
	
	
    vec2 ps = TEXTURE_PIXEL_SIZE * width; // multiply only once instead of eight times.
    float a;
    float maxa = col.a;
    float mina = col.a;

    // Use 8-way kernel for smoothness
    //------------------//
    //    X   X   X     //
    //      \\ | /       //
    //    X - O - X     //
    //      / | \\       //
    //    X   X   X     //
    //------------------//

    for(float y = -1.0; y <= 1.0; y++) {
        for(float x = -1.0; x <= 1.0; x++) {
            if(vec2(x,y) == vec2(0.0)) {
                continue; // ignore the center of kernel
            }

            a = texture(TEXTURE, UV + vec2(x,y)*ps).a;
            maxa = max(a, maxa); 
            mina = min(a, mina);
        }
    }

    // Fill transparent pixels only, don't overlap texture
    if(col.a == 0.0) {
        COLOR = mix(col, color, maxa-mina);
    } else {
        // Note on old code: if the last mix value is always 0, why even use it?
        COLOR = col;
    }
}"

[sub_resource type="ShaderMaterial" id=5]
resource_local_to_scene = true
shader = SubResource( 3 )
shader_param/width = 2.0
shader_param/color = null

[sub_resource type="RectangleShape2D" id=11]
resource_local_to_scene = true
extents = Vector2( 180, 28.5 )

[sub_resource type="ShaderMaterial" id=7]
resource_local_to_scene = true
shader = SubResource( 3 )
shader_param/width = 2.0
shader_param/color = null

[sub_resource type="RectangleShape2D" id=12]
resource_local_to_scene = true
extents = Vector2( 180, 28.5 )

[sub_resource type="ShaderMaterial" id=9]
resource_local_to_scene = true
shader = SubResource( 3 )
shader_param/width = 2.0
shader_param/color = null

[sub_resource type="RectangleShape2D" id=13]
resource_local_to_scene = true
extents = Vector2( 180, 28.5 )

[node name="PrimaHeight" instance=ExtResource( 1 )]
title = "Beneficios Optalert"
question = "Optalert es un sistema diseñado para la detección temprana de somnolencia. Conecta la imagen que representa cada beneficio."

[node name="Title" parent="Panel" index="0"]
text = "Beneficios Optalert"

[node name="Question" parent="Panel" index="2"]
text = "Optalert es un sistema diseñado para la detección temprana de somnolencia. Conecta la imagen que representa cada beneficio."

[node name="PairElement" parent="Elements" index="0" instance=ExtResource( 2 )]
position = Vector2( -145, -39 )
image = ExtResource( 6 )
image_scale = 0.11

[node name="PairElement2" parent="Elements" index="1" instance=ExtResource( 2 )]
position = Vector2( -222, 45 )
id = 1
image = ExtResource( 5 )
image_scale = 0.11

[node name="PairElement3" parent="Elements" index="2" instance=ExtResource( 2 )]
position = Vector2( -140, 128 )
id = 2
image = ExtResource( 4 )
image_scale = 0.11

[node name="PairElement4" parent="Elements" index="3" instance=ExtResource( 2 )]
position = Vector2( -209, 211 )
id = 3
image = ExtResource( 7 )
image_scale = 0.115

[node name="PairElement5" parent="Elements" index="4" instance=ExtResource( 2 )]
position = Vector2( 107, 195 )
text = "Reducción a CERO accidentes"

[node name="CollisionShape2D" parent="Elements/PairElement5" index="0"]
position = Vector2( 160, 18.5 )
shape = SubResource( 10 )

[node name="Label" parent="Elements/PairElement5" index="1"]
margin_right = 320.0
margin_bottom = 37.0
text = "Reducción a CERO accidentes"

[node name="Icon" parent="Elements/PairElement5" index="2"]
material = SubResource( 5 )

[node name="Border" parent="Elements/PairElement5" index="6"]
margin_right = 340.0
margin_bottom = 47.0

[node name="HighLite" parent="Elements/PairElement5" index="7"]
margin_right = 340.0
margin_bottom = 47.0

[node name="Line2D" parent="Elements/PairElement5" index="8"]
points = PoolVector2Array( -20, 18.5, 0, 0 )

[node name="PairElement6" parent="Elements" index="5" instance=ExtResource( 2 )]
position = Vector2( 107, -68 )
id = 1
text = "Aumento de la productividad"

[node name="CollisionShape2D" parent="Elements/PairElement6" index="0"]
position = Vector2( 160, 18.5 )
shape = SubResource( 11 )

[node name="Label" parent="Elements/PairElement6" index="1"]
margin_right = 320.0
margin_bottom = 37.0
text = "Aumento de la productividad"

[node name="Icon" parent="Elements/PairElement6" index="2"]
material = SubResource( 7 )

[node name="Border" parent="Elements/PairElement6" index="6"]
margin_right = 340.0
margin_bottom = 47.0

[node name="HighLite" parent="Elements/PairElement6" index="7"]
margin_right = 340.0
margin_bottom = 47.0

[node name="Line2D" parent="Elements/PairElement6" index="8"]
points = PoolVector2Array( -20, 18.5, 0, 0 )
default_color = Color( 0.9, 0, 0, 0.9 )

[node name="PairElement8" parent="Elements" index="6" instance=ExtResource( 2 )]
position = Vector2( 107, 19 )
id = 2
text = "Optimización de turnos"

[node name="CollisionShape2D" parent="Elements/PairElement8" index="0"]
position = Vector2( 160, 18.5 )
shape = SubResource( 12 )

[node name="Label" parent="Elements/PairElement8" index="1"]
margin_right = 320.0
margin_bottom = 37.0
text = "Optimización de turnos"

[node name="Icon" parent="Elements/PairElement8" index="2"]
material = SubResource( 9 )

[node name="Border" parent="Elements/PairElement8" index="6"]
margin_right = 340.0
margin_bottom = 47.0

[node name="HighLite" parent="Elements/PairElement8" index="7"]
margin_right = 340.0
margin_bottom = 47.0

[node name="Line2D" parent="Elements/PairElement8" index="8"]
points = PoolVector2Array( -20, 18.5, 0, 0 )
default_color = Color( 0.8, 0, 0, 0.8 )

[node name="PairElement9" parent="Elements" index="7" instance=ExtResource( 2 )]
position = Vector2( 107, 108 )
id = 3
text = "Reducción de costos"

[node name="CollisionShape2D" parent="Elements/PairElement9" index="0"]
position = Vector2( 160, 18.5 )
shape = SubResource( 13 )

[node name="Label" parent="Elements/PairElement9" index="1"]
margin_right = 320.0
margin_bottom = 37.0
text = "Reducción de costos"

[node name="Icon" parent="Elements/PairElement9" index="2"]
material = SubResource( 9 )

[node name="Border" parent="Elements/PairElement9" index="6"]
margin_right = 340.0
margin_bottom = 47.0

[node name="HighLite" parent="Elements/PairElement9" index="7"]
margin_right = 340.0
margin_bottom = 47.0

[node name="Line2D" parent="Elements/PairElement9" index="8"]
points = PoolVector2Array( -20, 18.5, 0, 0 )
default_color = Color( 0.7, 0, 0, 0.7 )

[node name="PopUp" parent="." index="5"]
text = "¡Excelente! Al seguir las recomendaciones de uso de Optalert se reducen a cero los accidentes, se aumenta la productividad ya que los operadores se toman en serio sus horarios de descanso, además cuenta con la información necesaria para optimizar los turnos y rutas, y finalmente al reducir accidentes se reducen los costos significativamente."

[node name="Panel" parent="PopUp" index="1"]
margin_bottom = 159.0

[node name="Button" parent="PopUp/Panel" index="0"]
text = "Continuar"

[node name="Title" parent="PopUp/Panel" index="1"]
text = "¡Correcto!"

[node name="Text" parent="PopUp/Panel" index="2"]
text = "¡Excelente! Al seguir las recomendaciones de uso de Optalert se reducen a cero los accidentes, se aumenta la productividad ya que los operadores se toman en serio sus horarios de descanso, además cuenta con la información necesaria para optimizar los turnos y rutas, y finalmente al reducir accidentes se reducen los costos significativamente."

[node name="Stars" parent="PopUp/Panel" index="3"]
visible = true

[node name="CursorHelp" parent="." index="7" instance=ExtResource( 3 )]
margin_left = -143.0
margin_top = -66.0
margin_right = -81.9999
margin_bottom = -2.0

[node name="Target" parent="CursorHelp" index="2"]
margin_left = 237.0
margin_top = 1.0
margin_right = 277.0
margin_bottom = 41.0

[editable path="Elements/PairElement5"]
[editable path="Elements/PairElement6"]
[editable path="Elements/PairElement8"]
[editable path="Elements/PairElement9"]
[editable path="PopUp"]
[editable path="CursorHelp"]
