[gd_scene load_steps=17 format=2]

[ext_resource path="res://game/main_screens/question_templates/Elements/dragable_element.tscn" type="PackedScene" id=1]
[ext_resource path="res://game/main_screens/question_templates/drag_image.tscn" type="PackedScene" id=2]
[ext_resource path="res://game/main_screens/question_templates/Elements/drop_zone.tscn" type="PackedScene" id=3]
[ext_resource path="res://assets/images/eagle1.png" type="Texture" id=4]
[ext_resource path="res://game/components/help/cursor_help.tscn" type="PackedScene" id=14]

[sub_resource type="RectangleShape2D" id=12]
extents = Vector2( 212.587, 167.5 )

[sub_resource type="StyleBoxFlat" id=16]
bg_color = Color( 0.6, 0.6, 0.6, 0 )
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color( 0.227451, 0.878431, 1, 1 )

[sub_resource type="RectangleShape2D" id=17]
resource_local_to_scene = true
extents = Vector2( 181.5, 22 )

[sub_resource type="Shader" id=15]
code = "shader_type canvas_item;
uniform float width = 2.0;
uniform vec4 color: hint_color;

void vertex() {
	VERTEX += (UV * 2.0 - 1.0) * width;
}

void fragment(){
	vec2 uv = UV;
    vec4 col;
	
	vec2 texture_pixel_size = vec2(1.0) / (vec2(1.0) / TEXTURE_PIXEL_SIZE + vec2(width * 2.0));
	uv = (uv - texture_pixel_size * width) * TEXTURE_PIXEL_SIZE / texture_pixel_size;
	if (uv != clamp(uv, vec2(0.0), vec2(1.0))) {
		COLOR.a = 0.0;
	} else {
		col = texture(TEXTURE, uv);
	}
	
	
    vec2 ps = TEXTURE_PIXEL_SIZE * width; // multiply only once instead of eight times.
    float a;
    float maxa = col.a;
    float mina = col.a;

    // Use 8-way kernel for smoothness
    //------------------//
    //    X   X   X     //
    //      \\ | /       //
    //    X - O - X     //
    //      / | \\       //
    //    X   X   X     //
    //------------------//

    for(float y = -1.0; y <= 1.0; y++) {
        for(float x = -1.0; x <= 1.0; x++) {
            if(vec2(x,y) == vec2(0.0)) {
                continue; // ignore the center of kernel
            }

            a = texture(TEXTURE, UV + vec2(x,y)*ps).a;
            maxa = max(a, maxa); 
            mina = min(a, mina);
        }
    }

    // Fill transparent pixels only, don't overlap texture
    if(col.a == 0.0) {
        COLOR = mix(col, color, maxa-mina);
    } else {
        // Note on old code: if the last mix value is always 0, why even use it?
        COLOR = col;
    }
}"

[sub_resource type="ShaderMaterial" id=8]
resource_local_to_scene = true
shader = SubResource( 15 )
shader_param/width = 2.0
shader_param/color = null

[sub_resource type="RectangleShape2D" id=18]
resource_local_to_scene = true
extents = Vector2( 182, 22 )

[sub_resource type="RectangleShape2D" id=20]
resource_local_to_scene = true
extents = Vector2( 160, 22 )

[sub_resource type="RectangleShape2D" id=21]
resource_local_to_scene = true
extents = Vector2( 175, 22 )

[sub_resource type="RectangleShape2D" id=23]
resource_local_to_scene = true
extents = Vector2( 65, 22 )

[sub_resource type="RectangleShape2D" id=19]
resource_local_to_scene = true
extents = Vector2( 140, 22 )

[sub_resource type="RectangleShape2D" id=22]
resource_local_to_scene = true
extents = Vector2( 80, 25.5 )

[node name="EPP" instance=ExtResource( 2 )]
margin_right = -74.3486
title = "Sistema Eagle"
question = "El sistema Eagle es una tableta que va en el vehículo y se encarga de obtener la información de los lentes y comunicarla a los servidores. Arrastre a la zona las características correspondientes al sistema Eagle"

[node name="Panel" parent="." index="1"]
margin_left = -428.826
margin_right = 503.174

[node name="Title" parent="Panel" index="0"]
text = "Sistema Eagle"

[node name="Question" parent="Panel" index="2"]
text = "El sistema Eagle es una tableta que va en el vehículo y se encarga de obtener la información de los lentes y comunicarla a los servidores. Arrastre a la zona las características correspondientes al sistema Eagle"

[node name="Zones" parent="." index="4"]
unique_name_in_owner = true
margin_left = 142.0
margin_top = 224.0
margin_right = 182.0
margin_bottom = 264.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Zones" index="0"]
position = Vector2( 96.5872, -145.5 )
shape = SubResource( 12 )

[node name="DropZone" parent="Zones/CollisionShape2D" index="0" instance=ExtResource( 3 )]
position = Vector2( 1.5871, -0.5 )
id = 1

[node name="DropZone2" parent="Zones/CollisionShape2D" index="1" instance=ExtResource( 3 )]
position = Vector2( 1.5871, 33.5 )
id = 2

[node name="DropZone3" parent="Zones/CollisionShape2D" index="2" instance=ExtResource( 3 )]
position = Vector2( 1.5871, 69.5 )
id = 3

[node name="DropZone4" parent="Zones/CollisionShape2D" index="3" instance=ExtResource( 3 )]
position = Vector2( 1.5871, 103.5 )
id = 4

[node name="DropZone5" parent="Zones/CollisionShape2D" index="4" instance=ExtResource( 3 )]
position = Vector2( 1.5871, 134.5 )
id = 5

[node name="TextureRect" type="TextureRect" parent="Zones/CollisionShape2D" index="5"]
margin_left = -71.4129
margin_top = -159.5
margin_right = 78.5871
margin_bottom = -39.5
mouse_filter = 2
texture = ExtResource( 4 )
expand = true
stretch_mode = 5

[node name="HighLite" type="Panel" parent="Zones/CollisionShape2D/TextureRect" index="0"]
unique_name_in_owner = true
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
custom_styles/panel = SubResource( 16 )

[node name="CorrectElements" parent="." index="5"]
margin_top = 2.0
margin_bottom = 42.0

[node name="DragableElement3" parent="CorrectElements" index="0" instance=ExtResource( 1 )]
position = Vector2( -160.826, -66 )
id = 1
text = "Arranque automático junto al vehículo"
image_scale = 0.27

[node name="CollisionShape2D" parent="CorrectElements/DragableElement3" index="0"]
shape = SubResource( 17 )

[node name="Label" parent="CorrectElements/DragableElement3" index="1"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -161.5
margin_top = -12.0
margin_right = 161.5
margin_bottom = 12.0
text = "Arranque automático junto al vehículo"

[node name="Icon" parent="CorrectElements/DragableElement3" index="2"]
material = SubResource( 8 )

[node name="HighLite" parent="CorrectElements/DragableElement3" index="6"]
margin_left = -181.5
margin_top = -22.0
margin_right = 181.5
margin_bottom = 22.0

[node name="DragableElement4" parent="CorrectElements" index="1" instance=ExtResource( 1 )]
position = Vector2( -196.826, -12 )
id = 2
text = "Pantalla LumiBond® legible a la luz del sol"
image_scale = 0.27

[node name="CollisionShape2D" parent="CorrectElements/DragableElement4" index="0"]
shape = SubResource( 18 )

[node name="Label" parent="CorrectElements/DragableElement4" index="1"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -162.0
margin_top = -12.0
margin_right = 162.0
margin_bottom = 12.0
text = "Pantalla LumiBond® legible a la luz del sol"

[node name="Icon" parent="CorrectElements/DragableElement4" index="2"]
material = SubResource( 8 )

[node name="HighLite" parent="CorrectElements/DragableElement4" index="6"]
margin_left = -182.0
margin_top = -22.0
margin_right = 182.0
margin_bottom = 22.0

[node name="DragableElement6" parent="CorrectElements" index="2" instance=ExtResource( 1 )]
position = Vector2( -211.826, 101 )
id = 3
text = "Protección de entrada (IP67)"
image_scale = 0.27

[node name="CollisionShape2D" parent="CorrectElements/DragableElement6" index="0"]
shape = SubResource( 20 )

[node name="Label" parent="CorrectElements/DragableElement6" index="1"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -140.0
margin_top = -12.0
margin_right = 140.0
margin_bottom = 12.0
text = "Protección de entrada (IP67)"

[node name="Icon" parent="CorrectElements/DragableElement6" index="2"]
material = SubResource( 8 )

[node name="HighLite" parent="CorrectElements/DragableElement6" index="6"]
margin_left = -160.0
margin_top = -22.0
margin_right = 160.0
margin_bottom = 22.0

[node name="DragableElement7" parent="CorrectElements" index="3" instance=ExtResource( 1 )]
position = Vector2( -146.826, 160 )
id = 4
text = "Comunicaciones celulares y WiFi"
image_scale = 0.27

[node name="CollisionShape2D" parent="CorrectElements/DragableElement7" index="0"]
shape = SubResource( 21 )

[node name="Label" parent="CorrectElements/DragableElement7" index="1"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -155.0
margin_top = -12.0
margin_right = 155.0
margin_bottom = 12.0
text = "Comunicaciones celulares y WiFi"

[node name="Icon" parent="CorrectElements/DragableElement7" index="2"]
material = SubResource( 8 )

[node name="HighLite" parent="CorrectElements/DragableElement7" index="6"]
margin_left = -175.0
margin_top = -22.0
margin_right = 175.0
margin_bottom = 22.0

[node name="DragableElement9" parent="CorrectElements" index="4" instance=ExtResource( 1 )]
position = Vector2( -69.8257, 222 )
id = 5
text = "GPS"
image_scale = 0.27

[node name="CollisionShape2D" parent="CorrectElements/DragableElement9" index="0"]
shape = SubResource( 23 )

[node name="Label" parent="CorrectElements/DragableElement9" index="1"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -45.0
margin_top = -12.0
margin_right = 45.0
margin_bottom = 12.0
text = "GPS"

[node name="Icon" parent="CorrectElements/DragableElement9" index="2"]
material = SubResource( 8 )

[node name="HighLite" parent="CorrectElements/DragableElement9" index="6"]
margin_left = -65.0
margin_top = -22.0
margin_right = 65.0
margin_bottom = 22.0

[node name="IncorrectElements" parent="." index="6"]
margin_top = 1.0
margin_bottom = 41.0

[node name="DragableElement5" parent="IncorrectElements" index="0" instance=ExtResource( 1 )]
position = Vector2( -119.826, 44 )
id = -1
text = "Teclado QWERTY físico"
image_scale = 0.27

[node name="CollisionShape2D" parent="IncorrectElements/DragableElement5" index="0"]
shape = SubResource( 19 )

[node name="Label" parent="IncorrectElements/DragableElement5" index="1"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -120.0
margin_top = -12.0
margin_right = 120.0
margin_bottom = 12.0
text = "Teclado QWERTY físico"

[node name="Icon" parent="IncorrectElements/DragableElement5" index="2"]
material = SubResource( 8 )

[node name="HighLite" parent="IncorrectElements/DragableElement5" index="6"]
margin_left = -140.0
margin_top = -22.0
margin_right = 140.0
margin_bottom = 22.0

[node name="DragableElement8" parent="IncorrectElements" index="1" instance=ExtResource( 1 )]
position = Vector2( -278.826, 221 )
id = -2
text = "Diseño frágil"
image_scale = 0.27

[node name="CollisionShape2D" parent="IncorrectElements/DragableElement8" index="0"]
shape = SubResource( 22 )

[node name="Label" parent="IncorrectElements/DragableElement8" index="1"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -60.0
margin_top = -15.5
margin_right = 60.0
margin_bottom = 15.5
text = "Diseño frágil"

[node name="Icon" parent="IncorrectElements/DragableElement8" index="2"]
material = SubResource( 8 )

[node name="HighLite" parent="IncorrectElements/DragableElement8" index="6"]
margin_left = -80.0
margin_top = -25.5
margin_right = 80.0
margin_bottom = 25.5

[node name="PopUp" parent="." index="7"]
text = "El sistema Eagle además cumple con las especificaciones militares de diseño
resistente (MIL-STD 810G)."

[node name="CursorHelp" parent="." index="9" instance=ExtResource( 14 )]
margin_left = -72.8257
margin_top = 44.0
margin_right = -11.8257
margin_bottom = 108.0

[node name="Target" parent="CursorHelp" index="2"]
margin_left = 169.0
margin_top = 78.0
margin_right = 209.0
margin_bottom = 118.0

[editable path="CorrectElements/DragableElement3"]
[editable path="CorrectElements/DragableElement4"]
[editable path="CorrectElements/DragableElement6"]
[editable path="CorrectElements/DragableElement7"]
[editable path="CorrectElements/DragableElement9"]
[editable path="IncorrectElements/DragableElement5"]
[editable path="IncorrectElements/DragableElement8"]
[editable path="CursorHelp"]
